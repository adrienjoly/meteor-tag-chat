<template name="layout">
  {{> loginButtons align="right"}}<br>
  {{#unless currentUser}}
    {{> loginPage}}
   {{else}}
    {{> yield}}
  {{/unless}}
</template>

<!-- common/shared templates -->

<template name="loginPage">
  please login
</template>

<template name="discushape">
  <a target="_blank" href="/chatroom/{{_id}}" class="discushape new" data-tags="{{tagsOrId}}"></a>
</template>

<!-- home page (after login) -->

<template name="home">
  <h1>Tag Chat Prototype</h1>
  <form id="mytagsForm">
    My tags:
    <input type="text" id="mytags" placeholder="paris, piano, zzz" value="{{mytagsStr}}">
    <input type="submit" name="ok" value="OK">
  </form>
  <h2>Chat rooms:</h2>
  <ul>
  {{#each chatrooms}}
    <li>{{> discushape}}</li>
  {{/each}}    
  </ul>
</template>

<!-- chat room page -->

<template name="chatroom">
  <h1>Chat room: {{otherUser.tagsOrId}}</h1>
  <p>Message: <input type="text" id="message"></p>
  {{#each messages}}
    <strong>{{name}}:</strong> {{message}}<br>
  {{/each}}
</template>
