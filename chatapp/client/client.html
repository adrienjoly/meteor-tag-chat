<template name="layout">
  {{> loginButtons align="right"}}<br>
  {{#unless currentUser}}
    {{> loginPage}}
   {{else}}
    {{> yield}}
  {{/unless}}
</template>

<!-- common/shared templates -->

<template name="loginPage">
  please login
</template>

<template name="discushape">
  <div class="discushape new" data-tags="{{tagsOrId}}" title="{{tagsOrId}}"></div>
</template>

<template name="disculink">
  <a target="_blank" href="/chatroom/{{_id}}" class="discushape new" data-tags="{{tagsOrId}}" title="{{tagsOrId}}"></a>
</template>

<!-- home page (after login) -->

<template name="home">
  <h1>Tag Chat Prototype</h1>
  <form id="mytagsForm">
    what are you about?
    <input type="text" id="mytags" placeholder="paris, piano, zzz, ..." value="{{mytagsStr}}">
    <input type="submit" name="ok" value="OK">
  </form>
  <p>have bits of talk with anyone sharing common interests with you at a specific moment. select topics and see who's about it too. shape your entourage, find people who care about the same things, at the same moment. jump in, talk to someone or be talked to. share moods, hobbies, ideas, desires, travels, services...</p>
  <h2>Users:</h2>
  <ul>
  {{#each chatrooms}}
    <li>{{> disculink}} {{tags}}</li>
  {{/each}}    
  </ul>
</template>

<!-- chat room page -->

<template name="chatroom">
  {{#with otherUser}}
    {{> discushape}}
  {{/with}}
  <h1>User: {{otherUser.tagsOrId}}</h1>
  <p>Message: <input type="text" id="message"></p>
  {{#each messages}}
    <strong>{{name}}:</strong> {{message}}<br>
  {{/each}}
</template>
